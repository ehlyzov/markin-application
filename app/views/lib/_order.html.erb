<% if order.messages.present? %>
  <dl>
    <dt><%= Order.human_attribute_name 'messages' %></dt>
    <% order.messages.each do |message| %>
      <dd><%= I18n.l message.created_at, format: :short %>, <%= message.text %>.</dd>
    <% end %>
  </dl>
<% end %>

<table class="lib-table-underlined">
  <thead>
    <tr>
      <th class="lib-table-cell-11">
        <%= Order::Item.human_attribute_name "product" %>
      </th>
      <th class="lib-table-cell-3">
        <%= Order::Item.human_attribute_name "count" %>
      </th>
      <th class="lib-table-cell-3">
        <%= Order::Item.human_attribute_name "size" %>
      </th>
      <th class="lib-table-cell-3">
        <%= Order::Item.human_attribute_name "amount" %>
      </th>
    </tr>
  </thead>
  <tbody>
    <% order.items.each do |item| %>
      <tr>
        <td>
          <%= render 'lib/product_line', product: item.product %>
        </td>
        <td>
          <%= item.amount %>
        </td>
        <td>
          <%= item.size.presence || "â€”" %>
        </td>
        <td>
          <%= number_to_currency item.total %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<hr>

<% if order.shipping_info.present? %>
  <dl>

    <lib-layout>
      <lib-layout-cell width="4">
        <dt><%= Order::ShippingInfo.human_attribute_name('shipping_name') %>:</dt>
        <dd><%= order.shipping_info.shipping_name %></dd>
      </lib-layout-cell>
      <lib-layout-cell width="4" gap="2">
        <dt><%= Order::ShippingInfo.human_attribute_name('country') %>:</dt>
        <dd><% if order.shipping_info.country.present? %><%= order.shipping_info.country.name %><% end %></dd>
      </lib-layout-cell>
    </lib-layout>

    <lib-layout>
      <lib-layout-cell width="4">
        <dt><%= Order::ShippingInfo.human_attribute_name('shipping_address_line1') %>:</dt>
        <dd><%= order.shipping_info.shipping_address_line1 %></dd>
      </lib-layout-cell>
      <lib-layout-cell width="4" gap="2">
        <dt><%= Order::ShippingInfo.human_attribute_name('shipping_address_line2') %>:</dt>
        <dd><%= order.shipping_info.shipping_address_line2 %></dd>
      </lib-layout-cell>
    </lib-layout>

    <lib-layout>
      <lib-layout-cell width="4">
        <dt><%= Order::ShippingInfo.human_attribute_name('shipping_city') %>:</dt>
        <dd><%= order.shipping_info.shipping_city %></dd>
      </lib-layout-cell>
      <lib-layout-cell width="4" gap="2">
        <dt><%= Order::ShippingInfo.human_attribute_name('shipping_state') %>:</dt>
        <dd><%= order.shipping_info.shipping_state %></dd>
      </lib-layout-cell>
    </lib-layout>

    <lib-layout>
      <lib-layout-cell width="4">
        <dt><%= Order::ShippingInfo.human_attribute_name('shipping_zip') %>:</dt>
        <dd><%= order.shipping_info.shipping_zip %></dd>
      </lib-layout-cell>
      <lib-layout-cell width="4" gap="2">
        <dt><%= Order::ShippingInfo.human_attribute_name('phone_number') %>:</dt>
        <dd><%= order.shipping_info.phone_number %></dd>
      </lib-layout-cell>
    </lib-layout>
  </dl>

  <hr>
<% end %>

<dl>
  <% if order.shipping_info.present? %>
    <dt><%= Order.human_attribute_name :delivery_price %></dt>
    <dd><%= number_to_currency order.delivery_price %></dd>
  <% end %>
  <dt><%= Order.human_attribute_name :total %></dt>
  <dd><%= number_to_currency order.total %></dd>
</dl>
